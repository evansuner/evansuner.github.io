<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>使用 pytube 爬取 YouTube 视频 | Evan&#39;s Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="看完《同居人是猫》后，发现片头曲《アンノウンワールド》（Unknown world）真的很好听，但是在网抑云上却没找到歌曲。  这里不得不说，网抑云的版权是真的少，动漫已经出了快两年了，歌曲都还没有争取到。  下面进入正题： 准备12# 直接使用 pytube，上手简单pip3 install pytube 代码123from pytube import YouTubeyt &#x3D; YouTube(&amp;">
<meta property="og:type" content="article">
<meta property="og:title" content="使用 pytube 爬取 YouTube 视频">
<meta property="og:url" content="http://example.com/2021/11/14/%E4%BD%BF%E7%94%A8%20pytube%20%E7%88%AC%E5%8F%96%20YouTube%20%E8%A7%86%E9%A2%91-%E4%BD%BF%E7%94%A8pytube%E7%88%AC%E5%8F%96youtube%E8%A7%86%E9%A2%91/index.html">
<meta property="og:site_name" content="Evan&#39;s Blog">
<meta property="og:description" content="看完《同居人是猫》后，发现片头曲《アンノウンワールド》（Unknown world）真的很好听，但是在网抑云上却没找到歌曲。  这里不得不说，网抑云的版权是真的少，动漫已经出了快两年了，歌曲都还没有争取到。  下面进入正题： 准备12# 直接使用 pytube，上手简单pip3 install pytube 代码123from pytube import YouTubeyt &#x3D; YouTube(&amp;">
<meta property="og:locale">
<meta property="article:published_time" content="2021-11-13T19:16:01.549Z">
<meta property="article:modified_time" content="2021-11-13T19:16:01.549Z">
<meta property="article:author" content="Evan">
<meta property="article:tag" content="Python">
<meta property="article:tag" content="爬虫">
<meta property="article:tag" content="pytube">
<meta name="twitter:card" content="summary">
  
  <link rel="stylesheet" href="//cdn.bootcss.com/highlight.js/9.2.0/styles/github.min.css">
  <script src="//cdn.bootcss.com/highlight.js/9.2.0/highlight.min.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', (event) => {
      document.querySelectorAll('pre code').forEach((block) => {
        hljs.highlightBlock(block);
      });
    });
  </script>
  
<link rel="stylesheet" href="/css/index.css">

<meta name="generator" content="Hexo 6.3.0"></head>

<body style="


  background-color: #eff0f6

">
  <div id="container">
    <nav id="nav">
  <header class="header">
    <a href="/" class="title">Evan&#39;s Blog</a>
  </header>
  <div class="ctnWrap">
    <div class="icons">
      
        
          
            <a href="https://github.com/evansuner" target="_blank" class="nav-icn iconfont icon-github"></a>
          
        
      
    </div>
    <div class="menu">
      
        
            <a href="/" class="nav-menu ">HOME</a>
          
        
            <a href="/archives" class="nav-menu ">ARCHIVE</a>
          
        
            <a href="/about" class="nav-menu ">ABOUT</a>
          
        
      
    </div>
  </div>
</nav>
    <div id="main"><section class="article">
  <h2 class="title">使用 pytube 爬取 YouTube 视频</h2>
  <p class="sub">Nov 14, 2021</p>
  <article class="content">
    <p>看完《同居人是猫》后，发现片头曲《アンノウンワールド》（Unknown world）真的很好听，但是在网抑云上却没找到歌曲。</p>
<blockquote>
<p>这里不得不说，网抑云的版权是真的少，动漫已经出了快两年了，歌曲都还没有争取到。</p>
</blockquote>
<p>下面进入正题：</p>
<h2 id="准备"><a href="#准备" class="headerlink" title="准备"></a>准备</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 直接使用 pytube，上手简单</span></span><br><span class="line">pip3 install pytube</span><br></pre></td></tr></table></figure>
<h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> pytube <span class="keyword">import</span> YouTube</span><br><span class="line">yt = YouTube(<span class="string">&quot;https://www.youtube.com/watch?v=U_MH7q3hSL0&quot;</span>)</span><br><span class="line">yt.streams.get_highest_resolution().download()</span><br></pre></td></tr></table></figure>

<h2 id="pytube-使用手册"><a href="#pytube-使用手册" class="headerlink" title="pytube 使用手册"></a>pytube 使用手册</h2><p>pytube 我认为最主要的两个类：</p>
<ul>
<li>YouTube<br>下载视频</li>
<li>Playlist<br>下载列表视频<br>下面我们先介绍一下 YouTube 这个类</li>
</ul>
<h3 id="Youtube"><a href="#Youtube" class="headerlink" title="Youtube"></a>Youtube</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> pytube <span class="keyword">import</span> YouTube</span><br><span class="line">yt = YouTube(<span class="string">&quot;https://www.youtube.com/watch?v=U_MH7q3hSL0&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(yt.title) <span class="comment"># 返回视频名称</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(yt.thmbnail_url) <span class="comment"># 返回视频开始前的缩略图url</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(yt.streams) <span class="comment"># 返回当前视频的音频/视频流 这是一个 queryset</span></span><br><span class="line">[</span><br><span class="line">&lt;Stream: itag=<span class="string">&quot;17&quot;</span> mime_type=<span class="string">&quot;video/3gpp&quot;</span> res=<span class="string">&quot;144p&quot;</span> fps=<span class="string">&quot;8fps&quot;</span> vcodec=<span class="string">&quot;mp4v.20.3&quot;</span> acodec=<span class="string">&quot;mp4a.40.2&quot;</span> progressive=<span class="string">&quot;True&quot;</span> <span class="built_in">type</span>=<span class="string">&quot;video&quot;</span>&gt;, </span><br><span class="line">&lt;Stream: itag=<span class="string">&quot;18&quot;</span> mime_type=<span class="string">&quot;video/mp4&quot;</span> res=<span class="string">&quot;360p&quot;</span> fps=<span class="string">&quot;30fps&quot;</span> vcodec=<span class="string">&quot;avc1.42001E&quot;</span> acodec=<span class="string">&quot;mp4a.40.2&quot;</span> progressive=<span class="string">&quot;True&quot;</span> <span class="built_in">type</span>=<span class="string">&quot;video&quot;</span>&gt;, </span><br><span class="line">&lt;Stream: itag=<span class="string">&quot;22&quot;</span> mime_type=<span class="string">&quot;video/mp4&quot;</span> res=<span class="string">&quot;720p&quot;</span> fps=<span class="string">&quot;30fps&quot;</span> vcodec=<span class="string">&quot;avc1.64001F&quot;</span> acodec=<span class="string">&quot;mp4a.40.2&quot;</span> progressive=<span class="string">&quot;True&quot;</span> <span class="built_in">type</span>=<span class="string">&quot;video&quot;</span>&gt;, </span><br><span class="line">&lt;Stream: itag=<span class="string">&quot;299&quot;</span> mime_type=<span class="string">&quot;video/mp4&quot;</span> res=<span class="string">&quot;1080p&quot;</span> fps=<span class="string">&quot;60fps&quot;</span> vcodec=<span class="string">&quot;avc1.64002a&quot;</span> progressive=<span class="string">&quot;False&quot;</span> <span class="built_in">type</span>=<span class="string">&quot;video&quot;</span>&gt;, </span><br><span class="line">&lt;Stream: itag=<span class="string">&quot;298&quot;</span> mime_type=<span class="string">&quot;video/mp4&quot;</span> res=<span class="string">&quot;720p&quot;</span> fps=<span class="string">&quot;60fps&quot;</span> vcodec=<span class="string">&quot;avc1.4d4016&quot;</span> progressive=<span class="string">&quot;False&quot;</span> <span class="built_in">type</span>=<span class="string">&quot;video&quot;</span>&gt;, </span><br><span class="line">&lt;Stream: itag=<span class="string">&quot;135&quot;</span> mime_type=<span class="string">&quot;video/mp4&quot;</span> res=<span class="string">&quot;480p&quot;</span> fps=<span class="string">&quot;30fps&quot;</span> vcodec=<span class="string">&quot;avc1.4d4014&quot;</span> progressive=<span class="string">&quot;False&quot;</span> <span class="built_in">type</span>=<span class="string">&quot;video&quot;</span>&gt;, </span><br><span class="line">&lt;Stream: itag=<span class="string">&quot;134&quot;</span> mime_type=<span class="string">&quot;video/mp4&quot;</span> res=<span class="string">&quot;360p&quot;</span> fps=<span class="string">&quot;30fps&quot;</span> vcodec=<span class="string">&quot;avc1.4d401e&quot;</span> progressive=<span class="string">&quot;False&quot;</span> <span class="built_in">type</span>=<span class="string">&quot;video&quot;</span>&gt;, </span><br><span class="line">&lt;Stream: itag=<span class="string">&quot;133&quot;</span> mime_type=<span class="string">&quot;video/mp4&quot;</span> res=<span class="string">&quot;240p&quot;</span> fps=<span class="string">&quot;30fps&quot;</span> vcodec=<span class="string">&quot;avc1.4d400c&quot;</span> progressive=<span class="string">&quot;False&quot;</span> <span class="built_in">type</span>=<span class="string">&quot;video&quot;</span>&gt;, </span><br><span class="line">&lt;Stream: itag=<span class="string">&quot;160&quot;</span> mime_type=<span class="string">&quot;video/mp4&quot;</span> res=<span class="string">&quot;144p&quot;</span> fps=<span class="string">&quot;30fps&quot;</span> vcodec=<span class="string">&quot;avc1.4d400b&quot;</span> progressive=<span class="string">&quot;False&quot;</span> <span class="built_in">type</span>=<span class="string">&quot;video&quot;</span>&gt;, </span><br><span class="line">&lt;Stream: itag=<span class="string">&quot;139&quot;</span> mime_type=<span class="string">&quot;audio/mp4&quot;</span> abr=<span class="string">&quot;48kbps&quot;</span> acodec=<span class="string">&quot;mp4a.40.5&quot;</span> progressive=<span class="string">&quot;False&quot;</span> <span class="built_in">type</span>=<span class="string">&quot;audio&quot;</span>&gt;, </span><br><span class="line">&lt;Stream: itag=<span class="string">&quot;140&quot;</span> mime_type=<span class="string">&quot;audio/mp4&quot;</span> abr=<span class="string">&quot;128kbps&quot;</span> acodec=<span class="string">&quot;mp4a.40.2&quot;</span> progressive=<span class="string">&quot;False&quot;</span> <span class="built_in">type</span>=<span class="string">&quot;audio&quot;</span>&gt;, </span><br><span class="line">&lt;Stream: itag=<span class="string">&quot;251&quot;</span> mime_type=<span class="string">&quot;audio/webm&quot;</span> abr=<span class="string">&quot;160kbps&quot;</span> acodec=<span class="string">&quot;opus&quot;</span> progressive=<span class="string">&quot;False&quot;</span> <span class="built_in">type</span>=<span class="string">&quot;audio&quot;</span>&gt;]</span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># streams 的每一项下的 field 我们都可以作为一个 streams 的过滤属性</span></span><br><span class="line"><span class="string"># 例如</span></span><br><span class="line"><span class="string">print(yt.streams.filter(progressive=True)) # 过滤可供下载的流</span></span><br><span class="line"><span class="string">print(yt.streams.filter(file_extension=&#x27;mp4&#x27;)) # 过滤格式为 mp4的流</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># 选择一个想要的流我们可以使用一下方式进行下载</span></span><br><span class="line"><span class="string">yt.streams.get_by_itag(22).download() # 根据 yt.streams的返回结果我们可以得到想要的 itag 值</span></span><br><span class="line"><span class="string"># 或者</span></span><br><span class="line"><span class="string">yt.streams.get_highest_resolution().download()</span></span><br><span class="line"><span class="string">yt.streams.get_lowest_resolution.download()</span></span><br><span class="line"><span class="string">yt.streams.get_audio_only().download()</span></span><br></pre></td></tr></table></figure>
<h3 id="Playlist"><a href="#Playlist" class="headerlink" title="Playlist"></a>Playlist</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> pytube <span class="keyword">import</span> Playlist</span><br><span class="line">p = Playlist(https://www.youtube.com/watch?v=hGkMbBzU-ic&amp;<span class="built_in">list</span>=PLZbj1ccJWFKWqYPrZMxkYhIrNdQNHNSPL)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(p.title) <span class="comment"># 返回视频列表的名称</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取列表下的每一个视频 url</span></span><br><span class="line"><span class="keyword">for</span> url <span class="keyword">in</span> p.video_urls[:<span class="number">3</span>]:</span><br><span class="line">    <span class="built_in">print</span>(url)</span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">[&#x27;https://www.youtube.com/watch?v=hGkMbBzU-ic&#x27;, &#x27;https://www.youtube.com/watch?v=XJXRhiH8h94&#x27;, &#x27;https://www.youtube.com/watch?v=TfpeS-y6h1E&#x27;]</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 下载列表中的所有视频</span></span><br><span class="line"><span class="keyword">for</span> video <span class="keyword">in</span> p.videos:</span><br><span class="line">    video.streams.get_highest_resolution().download()</span><br><span class="line"></span><br></pre></td></tr></table></figure>


  </article>
  <footer class="f-cf">
    
      <a href="/2021/11/14/%E4%B8%A4%E4%B8%AA%E4%B8%80%E4%B8%80%E5%AF%B9%E5%BA%94%E7%9A%84list%EF%BC%8C%E7%BB%84%E5%90%88%E6%88%90%E4%B8%80%E4%B8%AAdict-%E4%B8%A4%E4%B8%AA%E4%B8%80%E4%B8%80%E5%AF%B9%E5%BA%94%E7%9A%84list%E7%BB%84%E5%90%88%E6%88%90%E4%B8%80%E4%B8%AAdict/" class="link f-fl">⟵两个一一对应的list，组合成一个dict</a>
    
    
      <a href="/2021/11/13/02%20kubernetes%E9%83%A8%E7%BD%B2-02kubernetes-bu-shu/" class="link f-fr">02 kubernetes部署⟶</a>
    
  </footer>
</section></div>
    <footer id="footer" class="f-cf">
  reidosann@163.com
  
    
      
        · <a href="https://github.com/evansuner" target="_blank" class="nav-icn">GitHub</a>
      
    
  
  <span class="copyright">Powered by Evan</span>
</footer>
  </div>
</body>
</html>