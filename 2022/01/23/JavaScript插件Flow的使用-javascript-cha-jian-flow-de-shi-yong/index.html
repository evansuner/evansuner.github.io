<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>JavaScript插件Flow的使用 | Evan&#39;s Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="JavaScript是一种动态的弱语言，所以在编写代码的时候很可能会出现意想不到问题，并且要想找到错误，必须要在代码执行之后才能找到。使用Flow插件，可以给JavaScript以添加注释的形式模拟成静态语言。 Flow Flow is a static type checker for your JavaScript code. It does a lot of work to make you">
<meta property="og:type" content="article">
<meta property="og:title" content="JavaScript插件Flow的使用">
<meta property="og:url" content="http://example.com/2022/01/23/JavaScript%E6%8F%92%E4%BB%B6Flow%E7%9A%84%E4%BD%BF%E7%94%A8-javascript-cha-jian-flow-de-shi-yong/index.html">
<meta property="og:site_name" content="Evan&#39;s Blog">
<meta property="og:description" content="JavaScript是一种动态的弱语言，所以在编写代码的时候很可能会出现意想不到问题，并且要想找到错误，必须要在代码执行之后才能找到。使用Flow插件，可以给JavaScript以添加注释的形式模拟成静态语言。 Flow Flow is a static type checker for your JavaScript code. It does a lot of work to make you">
<meta property="og:locale">
<meta property="og:image" content="https://mweb-cdn.reidosann.top/mweb/16426931768314-20220120-16426931768321.jpg">
<meta property="og:image" content="https://mweb-cdn.reidosann.top/mweb/16426913764925-20220120-16426913764934.jpg">
<meta property="article:published_time" content="2022-01-22T16:00:34.239Z">
<meta property="article:modified_time" content="2022-01-22T16:00:34.239Z">
<meta property="article:author" content="Evan">
<meta property="article:tag" content="JavaScript">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://mweb-cdn.reidosann.top/mweb/16426931768314-20220120-16426931768321.jpg">
  
  <link rel="stylesheet" href="//cdn.bootcss.com/highlight.js/9.2.0/styles/github.min.css">
  <script src="//cdn.bootcss.com/highlight.js/9.2.0/highlight.min.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', (event) => {
      document.querySelectorAll('pre code').forEach((block) => {
        hljs.highlightBlock(block);
      });
    });
  </script>
  
<link rel="stylesheet" href="/css/index.css">

<meta name="generator" content="Hexo 6.3.0"></head>

<body style="


  background-color: #eff0f6

">
  <div id="container">
    <nav id="nav">
  <header class="header">
    <a href="/" class="title">Evan&#39;s Blog</a>
  </header>
  <div class="ctnWrap">
    <div class="icons">
      
        
          
            <a href="https://github.com/evansuner" target="_blank" class="nav-icn iconfont icon-github"></a>
          
        
      
    </div>
    <div class="menu">
      
        
            <a href="/" class="nav-menu ">HOME</a>
          
        
            <a href="/archives" class="nav-menu ">ARCHIVE</a>
          
        
            <a href="/about" class="nav-menu ">ABOUT</a>
          
        
      
    </div>
  </div>
</nav>
    <div id="main"><section class="article">
  <h2 class="title">JavaScript插件Flow的使用</h2>
  <p class="sub">Jan 23, 2022</p>
  <article class="content">
    <p>JavaScript是一种动态的弱语言，所以在编写代码的时候很可能会出现意想不到问题，并且要想找到错误，必须要在代码执行之后才能找到。使用Flow插件，可以给JavaScript以添加注释的形式模拟成静态语言。</p>
<h2 id="Flow"><a href="#Flow" class="headerlink" title="Flow"></a>Flow</h2><blockquote>
<p>Flow is a static type checker for your JavaScript code. It does a lot of work to make you more productive. Making you code faster, smarter, more confidently, and to a bigger scale. –from official site  </p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// @flow</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">sum</span>(<span class="params">a: number, b: number</span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> a + b</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">sum</span>(<span class="number">100</span>, <span class="number">50</span>) <span class="comment">// ok</span></span><br><span class="line"><span class="title function_">sum</span>(<span class="string">&#x27;100&#x27;</span>, <span class="number">50</span>) <span class="comment">// type error</span></span><br></pre></td></tr></table></figure>

<h3 id="Flow安装"><a href="#Flow安装" class="headerlink" title="Flow安装"></a>Flow安装</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 作为项目依赖安装，不使用全局</span></span><br><span class="line">yarn add flow-bin --dev</span><br></pre></td></tr></table></figure>
<h3 id="Flow使用"><a href="#Flow使用" class="headerlink" title="Flow使用"></a>Flow使用</h3><h4 id="声明"><a href="#声明" class="headerlink" title="声明"></a>声明</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 在项目在开头进行声明</span></span><br><span class="line"><span class="comment">// @flow</span></span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<h4 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h4><p><img src="https://mweb-cdn.reidosann.top/mweb/16426931768314-20220120-16426931768321.jpg" alt="16426931768314"></p>
<h4 id="启动flow服务检查"><a href="#启动flow服务检查" class="headerlink" title="启动flow服务检查"></a>启动flow服务检查</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">➜  <span class="built_in">test</span> yarn flow</span><br><span class="line">Error ┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈ weakly-typed.js:6:5</span><br><span class="line"></span><br><span class="line">Cannot call <span class="built_in">sum</span> with <span class="string">&quot;100&quot;</span> bound to a because string [1] is incompatible with</span><br><span class="line">number [2]. [incompatible-call]</span><br><span class="line"></span><br><span class="line"> [2] 2│ <span class="keyword">function</span> <span class="built_in">sum</span>(a: number, b: number)&#123;</span><br><span class="line">     3│     <span class="built_in">return</span> a+b</span><br><span class="line">     4│ &#125;</span><br><span class="line">     5│ <span class="built_in">sum</span>(100,100)</span><br><span class="line"> [1] 6│ <span class="built_in">sum</span>(<span class="string">&quot;100&quot;</span>,100)</span><br><span class="line"></span><br><span class="line">Found 1 error</span><br><span class="line">error Command failed with <span class="built_in">exit</span> code 2.</span><br><span class="line">info Visit https://yarnpkg.com/en/docs/cli/run <span class="keyword">for</span> documentation about this <span class="built_in">command</span>.</span><br></pre></td></tr></table></figure>
<p>使用flow如果一直使用命令行进行检查一定是非常的麻烦的，这里推荐使用flow vscode插件，这里选择Facebook flow官方的插件，使用时需要保存   </p>
<h4 id="关闭flow服务"><a href="#关闭flow服务" class="headerlink" title="关闭flow服务"></a>关闭flow服务</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">➜  <span class="built_in">test</span> yarn flow stop</span><br><span class="line">yarn run v1.22.17</span><br><span class="line">warning package.json: No license field</span><br><span class="line">$ /Users/Reido/Documents/Developer/VSCode/test/node_modules/.bin/flow stop</span><br><span class="line">Trying to connect to server <span class="keyword">for</span> `/Users/Reido/Documents/Developer/VSCode/test`</span><br><span class="line">Told server <span class="keyword">for</span> `/Users/Reido/Documents/Developer/VSCode/test` to die. Waiting <span class="keyword">for</span> confirmation...</span><br><span class="line">Successfully killed server <span class="keyword">for</span> `/Users/Reido/Documents/Developer/VSCode/test`</span><br><span class="line">✨  Done <span class="keyword">in</span> 2.44s.</span><br></pre></td></tr></table></figure>
<h4 id="移除类型注解"><a href="#移除类型注解" class="headerlink" title="移除类型注解"></a>移除类型注解</h4><p>在我们编码完成之后需要将代码中的注解全部移除，否则会无法运行<br>使用<code>yarn add flow-remove-types --dev</code>提供的命令行工具自动移除类型注解</p>
<ul>
<li>方式一(官方)<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 项目完成编码过后我们将移除类型注解的代码全部转移至dist目录下</span></span><br><span class="line">yarn flow-remove-types . -d dist</span><br></pre></td></tr></table></figure></li>
<li>方式二(主流方式)<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">yarn add @babel/core @babel/cli @babel/preset-flow --dev</span><br><span class="line"><span class="comment">## 在项目根目录下创建一个src文件夹，将源代码移入其中</span></span><br><span class="line"><span class="comment">## 在根目录下创建一个 .babelrc 配置文件</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;presets&quot;</span>:[<span class="string">&quot;@babel/preset-flow&quot;</span>]</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">## 在命令行中去除类型注释,将src下的源代码去除注释后的代码放在dist下</span></span><br><span class="line">yarn babel src -d dist</span><br></pre></td></tr></table></figure>
<font style="color:red">【注】</font><br>此时，我们注释的number或者其他类型下面会出现红线，我们需要进入vscode设置，将JavaScript校验关闭<br><img src="https://mweb-cdn.reidosann.top/mweb/16426913764925-20220120-16426913764934.jpg" alt="16426913764925"></li>
</ul>
<h4 id="flow-类型推断"><a href="#flow-类型推断" class="headerlink" title="flow 类型推断"></a>flow 类型推断</h4><p>根据代码使用情况，代码会提示缺少什么样的注释   </p>
<h4 id="flow-类型注解"><a href="#flow-类型注解" class="headerlink" title="flow 类型注解"></a>flow 类型注解</h4><p>flow的注解不仅可以使用在函数的参数上，还可以使用在<strong>变量的声明过程中</strong>还有<strong>函数的返回值</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 变量声明</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">num</span>: number = <span class="number">100</span></span><br><span class="line"><span class="comment">// num = &#x27;string&#x27; // 会报错</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 函数返回值</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">foo</span>(<span class="params"></span>): number &#123;</span><br><span class="line">    <span class="comment">// return 100</span></span><br><span class="line">    <span class="comment">// return &#x27;string&#x27; // 会报错</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 函数没有返回值的时候需要将其标记为 void</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">foo</span>(<span class="params"></span>): <span class="keyword">void</span> &#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="flow-原始类型"><a href="#flow-原始类型" class="headerlink" title="flow 原始类型"></a>flow 原始类型</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 原始类型</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@flow</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">a</span>: string = <span class="string">&#x27;foobar&#x27;</span></span><br><span class="line"><span class="keyword">const</span> <span class="attr">b</span>: number = <span class="number">100</span> <span class="comment">// Infinity // NaN</span></span><br><span class="line"><span class="keyword">const</span> <span class="attr">c</span>: boolean = <span class="literal">false</span> <span class="comment">// true</span></span><br><span class="line"><span class="keyword">const</span> <span class="attr">d</span>: <span class="literal">null</span> = <span class="literal">null</span></span><br><span class="line"><span class="keyword">const</span> <span class="attr">e</span>: <span class="keyword">void</span> = <span class="literal">undefined</span></span><br><span class="line"><span class="keyword">const</span> <span class="attr">f</span>: symbol = <span class="title class_">Symbol</span>()</span><br></pre></td></tr></table></figure>
<h4 id="flow-数组类型"><a href="#flow-数组类型" class="headerlink" title="flow 数组类型"></a>flow 数组类型</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 数组类型</span></span><br><span class="line"><span class="comment"> * 两种方式</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@flow</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">arr1</span>: <span class="title class_">Array</span>&lt;number&gt; = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line"><span class="keyword">const</span> <span class="attr">arr2</span>: number[] = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">// 元组</span></span><br><span class="line"><span class="keyword">const</span> <span class="attr">foo</span>: [string,number] = [<span class="string">&#x27;foo&#x27;</span>,<span class="number">1</span>]</span><br></pre></td></tr></table></figure>
<h4 id="flow-对象类型"><a href="#flow-对象类型" class="headerlink" title="flow 对象类型"></a>flow 对象类型</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 对象类型</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@flow</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 指定对象有两个键值对，对应其类型</span></span><br><span class="line"><span class="keyword">const</span> <span class="attr">obj1</span>: &#123; <span class="attr">foo</span>: string, <span class="attr">bar</span>: number &#125; = &#123; <span class="attr">foo</span>: <span class="string">&quot;zhangsan&quot;</span>, <span class="attr">bar</span>: <span class="number">18</span> &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 指定对象有两个键值对，foo可选</span></span><br><span class="line"><span class="keyword">const</span> <span class="attr">obj2</span>: &#123;foo?: string, <span class="attr">bar</span>:number&#125; = &#123;<span class="attr">bar</span>:<span class="number">100</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 不指定对象的键值对类型</span></span><br><span class="line"><span class="keyword">const</span> obj3 = &#123;&#125;</span><br><span class="line">obj3.<span class="property">key1</span> = <span class="string">&#x27;value1&#x27;</span></span><br><span class="line">obj3.<span class="property">key2</span> = <span class="number">100</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 指定对象的键值对所需的类型</span></span><br><span class="line"><span class="keyword">const</span> <span class="attr">obj4</span>: &#123;[string]:string&#125; = &#123;&#125;</span><br><span class="line">obj4.<span class="property">key1</span> = <span class="string">&#x27;value1&#x27;</span></span><br><span class="line">obj4.<span class="property">key2</span> = <span class="string">&#x27;value2&#x27;</span></span><br></pre></td></tr></table></figure>
<h4 id="flow-函数对象"><a href="#flow-函数对象" class="headerlink" title="flow 函数对象"></a>flow 函数对象</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 函数类型</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@flow</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 利用箭头函数，类似于函数签名的形式</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">foo</span>(<span class="params">callback: (string,number)=&gt;<span class="keyword">void</span></span>) &#123;</span><br><span class="line">    <span class="comment">// 接受两个参数，但是不允许有返回值,返回undefined</span></span><br><span class="line">    <span class="title function_">callback</span>(<span class="string">&#x27;string&#x27;</span>, <span class="number">100</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="flow-特殊类型"><a href="#flow-特殊类型" class="headerlink" title="flow 特殊类型"></a>flow 特殊类型</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 特殊类型</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@flow</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; type &#125; <span class="keyword">from</span> <span class="string">&quot;os&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">a</span>: <span class="string">&#x27;foo&#x27;</span> = <span class="string">&#x27;foo&#x27;</span></span><br><span class="line"><span class="comment">// const b: &#x27;foo&#x27; = &#x27;foo1&#x27; // 报错</span></span><br><span class="line"><span class="comment">// 一般用于以下情况，限制type这个变量只能有以下这三个值</span></span><br><span class="line"><span class="comment">// const type: &#x27;success&#x27; | &#x27;warning&#x27; | &#x27;danger&#x27; = &#x27;other&#x27; // 报错</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">c</span>: string | number = <span class="string">&#x27;&#x27;</span> <span class="comment">// 100</span></span><br><span class="line"></span><br><span class="line">type <span class="title class_">StringOrNumber</span> = string | number</span><br><span class="line"><span class="keyword">const</span> <span class="attr">d</span>: <span class="title class_">StringOrNumber</span> = <span class="string">&#x27;string&#x27;</span> <span class="comment">// 100</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// maybe类型</span></span><br><span class="line"><span class="keyword">const</span> <span class="attr">gender</span>: ?number = <span class="literal">undefined</span></span><br><span class="line"><span class="comment">// 相当于</span></span><br><span class="line"><span class="keyword">const</span> <span class="attr">gender1</span>: number | <span class="literal">null</span> | <span class="keyword">void</span> = <span class="literal">undefined</span></span><br></pre></td></tr></table></figure>
<h4 id="flow-任意类型"><a href="#flow-任意类型" class="headerlink" title="flow 任意类型"></a>flow 任意类型</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 任意类型</span></span><br><span class="line"><span class="comment"> * Mixed Any</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@flow</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// string|number|boolean|...</span></span><br><span class="line"><span class="comment">// Mixed是一个强类型</span></span><br><span class="line"><span class="keyword">import</span> &#123; type &#125; <span class="keyword">from</span> <span class="string">&quot;os&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">passMixed</span>(<span class="params">value: mixed</span>) &#123;</span><br><span class="line">    <span class="comment">// value.substr(1) // error</span></span><br><span class="line">    <span class="comment">// value * value   // error</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> value === <span class="string">&#x27;string&#x27;</span>) &#123;</span><br><span class="line">        value.<span class="title function_">substr</span>(<span class="number">1</span>) <span class="comment">// ok</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> value === <span class="string">&#x27;number&#x27;</span>) &#123;</span><br><span class="line">        value * value <span class="comment">// ok</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">passMixed</span>(<span class="string">&#x27;string&#x27;</span>)</span><br><span class="line"><span class="title function_">passMixed</span>(<span class="number">100</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// -----------------------------</span></span><br><span class="line"><span class="comment">// Any任然是一个弱类型的</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">passAny</span>(<span class="params">value: any</span>) &#123;</span><br><span class="line">    value.<span class="title function_">substr</span>(<span class="number">1</span>) <span class="comment">// ok</span></span><br><span class="line">    value * value   <span class="comment">// ok</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">passAny</span>(<span class="string">&#x27;string&#x27;</span>)</span><br><span class="line"><span class="title function_">passAny</span>(<span class="number">100</span>)</span><br></pre></td></tr></table></figure>
<h4 id="flow-类型小结"><a href="#flow-类型小结" class="headerlink" title="flow 类型小结"></a>flow 类型小结</h4><ul>
<li><a target="_blank" rel="noopener" href="https://flow.org/en/docs/types/">Facebook Flow官网对于types的描述文档</a>   </li>
<li><a target="_blank" rel="noopener" href="https://www.saltycrane.com/cheat-sheets/flow-type/latest/">更直观的第三方手册</a></li>
</ul>
<h4 id="flow-运行环境API"><a href="#flow-运行环境API" class="headerlink" title="flow 运行环境API"></a>flow 运行环境API</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 运行环境API</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@flow</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// document.getElementById(&#x27;app&#x27;) //ok</span></span><br><span class="line"><span class="comment">// document.getElementById(100) // error</span></span><br><span class="line"><span class="comment">// 如果找不到app这个对象，就返回 null</span></span><br><span class="line"><span class="keyword">const</span> <span class="attr">element</span>: <span class="title class_">HTMLElement</span> | <span class="literal">null</span> = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;app&#x27;</span>)</span><br></pre></td></tr></table></figure>
  </article>
  <footer class="f-cf">
    
      <a href="/2022/01/25/Giving%20advice%20on%20diet-givingadviceondiet/" class="link f-fl">⟵Giving advice on diet</a>
    
    
      <a href="/2022/01/22/JavaScript%E8%AF%AD%E8%A8%80%E7%B1%BB%E5%9E%8B%E5%88%86%E6%9E%90-javascript-yu-yan-lei-xing-fen-xi/" class="link f-fr">JavaScript语言类型分析⟶</a>
    
  </footer>
</section></div>
    <footer id="footer" class="f-cf">
  reidosann@163.com
  
    
      
        · <a href="https://github.com/evansuner" target="_blank" class="nav-icn">GitHub</a>
      
    
  
  <span class="copyright">Powered by Evan</span>
</footer>
  </div>
</body>
</html>